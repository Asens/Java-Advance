---
description: 什么是断路器模式
---
# 什么是断路器模式

在分布式的系统中,要进行大量的远程网络调用。对于本都调用和远程调用最大的区别就是远程调用可能会失败。可能会超时或是连接失败。对于超时的失败，会等到直到超时为止。本来毫秒级别的调用可能达到超时时间设置的几秒。尤其是对于多个系统的调用，当一个系统A崩溃，其他系统B调用该系统超时，调用系统B的系统C同样会超时，就会在分布式系统中发生严重的级联超时错误。而断路器模式就是及时切除病灶，以一种返回错误的方式避免整个系统因为一个系统崩溃而产生大规模级联崩溃问题。

断路器的基础原理比较简单。在断路器本身封装远程函数调用，同时监控调用的各种失败情况。当失败达到一个指定的阈值时，断路器切换状态。再次进行远程调用时，直接返回失败。当断路器打开时，就说明系统中某个服务发生了比较严重的问题，应该报警通知运维人员进行处理。断路器的流程如下图所示：

![image-20200312172013505](C:\Users\Asens\AppData\Roaming\Typora\typora-user-images\image-20200312172013505.png)



这是一个简单的断路器的例子。断路器的初始化：

```java
CircuitBreaker circuitBreaker = CircuitBreaker.create(timeout,threshold,monitor);
```



https://martinfowler.com/bliki/CircuitBreaker.html